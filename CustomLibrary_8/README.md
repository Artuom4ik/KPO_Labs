# Калькулятор с пользовательскими библиотеками

## Описание проекта

Данный проект представляет собой калькулятор с поддержкой сложных математических выражений, включая обработку скобок и приоритетов операций. В рамках рефакторинга код был разделен на несколько пользовательских библиотек:

1. **calculator_lib** - статическая библиотека для вычисления выражений
2. **developer_lib** - динамическая библиотека информации о разработчиках

## Структура проекта

```
CustomLibrary_8/
├── calculator_lib/           # Статическая библиотека для вычислений
│   ├── calculator.py         # Основные операции и вычисления
│   ├── states.py             # Классы состояний калькулятора
│   ├── model.py              # Модель калькулятора
│   ├── __init__.py           # Инициализация библиотеки
│   └── setup.py              # Файл настройки для установки библиотеки
├── developer_lib/            # Динамическая библиотека информации о разработчиках
│   ├── developer_info.py     # Информация о разработчиках
│   ├── __init__.py           # Инициализация библиотеки
│   └── setup.py              # Файл настройки для установки библиотеки
├── main_refactored.py        # Основной файл приложения (рефакторинг)
├── build_libraries.py        # Скрипт для сборки и установки библиотек
├── dynamic_load_example.py   # Пример динамической загрузки библиотеки
├── main.py                   # Оригинальный файл приложения
├── controller.py             # Контроллер калькулятора
├── view.py                   # Представление калькулятора
├── config_manager.py         # Менеджер конфигураций
├── create_configs.py         # Скрипт для создания конфигураций
├── operations.py             # Оригинальные операции калькулятора
└── states.py                 # Оригинальные состояния калькулятора
```

## Процесс рефакторинга

1. **Создание статической библиотеки calculator_lib**:
   - Выделены классы операций и вычислений в `calculator.py`
   - Выделены классы состояний в `states.py`
   - Выделена модель калькулятора в `model.py`
   - Создан файл `__init__.py` для экспорта компонентов
   - Создан файл `setup.py` для установки библиотеки

2. **Создание динамической библиотеки developer_lib**:
   - Создан класс `DeveloperInfo` в `developer_info.py`
   - Создан файл `__init__.py` для экспорта компонентов
   - Создан файл `setup.py` для установки библиотеки

3. **Рефакторинг основного приложения**:
   - Создан файл `main_refactored.py`, использующий новые библиотеки
   - Добавлена поддержка как статической, так и динамической загрузки библиотек
   - Добавлена обработка ошибок при загрузке библиотек

## Способы использования библиотек

### Статическая библиотека calculator_lib

```python
# Статический импорт
from calculator_lib import CalculatorModel, ExpressionEvaluator

# Создание экземпляра модели калькулятора
model = CalculatorModel()

# Использование модели
model.append_digit("5")
model.set_operation("+")
model.append_digit("3")
model.calculate()
result = model.get_current_value()
print(f"Результат: {result}")

# Использование вычислителя выражений
evaluator = ExpressionEvaluator()
result = evaluator.evaluate("2 + 2 * 2")
print(f"Результат выражения: {result}")
```

### Динамическая библиотека developer_lib

#### Статическая загрузка
```python
# Статический импорт
from developer_lib import DeveloperInfo

# Использование информации о разработчиках
print(f"Разработчики: {', '.join(DeveloperInfo.get_developers())}")
print(f"Версия: {DeveloperInfo.get_version()}")
print(f"Группа: {DeveloperInfo.get_group()}")
print(f"Описание: {DeveloperInfo.get_project_description()}")
```

#### Динамическая загрузка
```python
# Динамический импорт
import importlib.util

# Поиск модуля
spec = importlib.util.find_spec('developer_lib.developer_info')
if spec is not None:
    # Загрузка модуля
    module = importlib.util.module_from_spec(spec)
    spec.loader.exec_module(module)
    
    # Получение класса DeveloperInfo
    DeveloperInfo = module.DeveloperInfo
    
    # Использование информации о разработчиках
    print(f"Разработчики: {', '.join(DeveloperInfo.get_developers())}")
    print(f"Версия: {DeveloperInfo.get_version()}")
```

## Сборка и установка библиотек

Для сборки и установки библиотек используйте скрипт `build_libraries.py`:

```bash
python build_libraries.py
```

Этот скрипт выполнит следующие действия:
1. Соберет статическую библиотеку calculator_lib
2. Соберет динамическую библиотеку developer_lib
3. Установит обе библиотеки в системные пути Python
4. Скопирует файл `main_refactored.py` на рабочий стол как `calculator.py`

## Результаты выполнения задания

1. **Вынесение кода в статическую библиотеку**:
   - Функциональность вычисления выражений вынесена в отдельную статическую библиотеку `calculator_lib`.
   - При запуске программы с рабочего стола, программа будет работать корректно, если библиотека установлена в системные пути Python или находится в том же каталоге.

2. **Вынесение кода в динамическую библиотеку со статическим вызовом**:
   - Информация о разработчиках вынесена в отдельную динамическую библиотеку `developer_lib`.
   - При запуске программы с рабочего стола, программа попытается загрузить библиотеку статически.
   - Если библиотека не найдена, программа выдаст сообщение об ошибке, но продолжит работу с ограниченной функциональностью.

3. **Вынесение кода в динамическую библиотеку с динамическим вызовом**:
   - В программе реализован механизм динамической загрузки библиотеки `developer_lib`.
   - Если статическая загрузка не удалась, программа попытается загрузить библиотеку динамически.
   - Если динамическая загрузка также не удалась, программа создаст минимальную замену для отсутствующей функциональности.

## Авторы

- Herasimau Artsem
- Shaplavskiy Mikita

Группа: 10701323 